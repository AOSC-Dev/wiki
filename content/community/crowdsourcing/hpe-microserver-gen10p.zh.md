+++
title = "[筹备中] 升级社区主软件源服务器"
+++

本文为众筹升级社区主软件源服务器为慧与科技 (HPE) ProLiant MicroServer Gen10 Plus 的计划。升级后的主软件源服务器将在提供软件源服务之外，一并提供用于离线软件包构建的源码缓存服务。

# 导言

目前社区主软件源服务器为一台 xTom 赞助的实例，但是该机的存储容量对于社区而言较为局促。因此，社区希望能有一台更为充裕的存储空间的服务器来替代现有的主软件源服务器。除此之外，新的软件源服务器的存储空间还可以为社区提供离线软件包构建所需的源码缓存服务。最后，社区现有的软件源服务器的性能对于 p-vector 依赖追踪服务而言稍显不足，因此社区希望新的软件源服务器能拥有更强的性能以满足 p-vector 的需求。

本提案旨在为社区获取一台能满足以上要求的、且成本足够低廉的服务器。慧与 ProLiant MicroServer Gen10 Plus 拥有能满足以上要求，且在进行适当的处理器升级以后，也足以应对 p-vector 依赖扫描器的性能需求。

# 预算计划

社区成员 Sijie Bu 将以友情价转让以下个人所拥有的闲置硬件：

+ 慧与 ProLiant MicroServer Gen10 Plus 服务器（320 美元）：
  - 出厂配备一枚至强 E-2224 处理器与 16GB DDR4 ECC UDIMM 内存；后期升级至 32GB 兼容内存。
  - 包含慧与 iLO Enablement Kit (SKU # P13788-B21) 带外管理扩展卡。
  - 机箱上有数个贴纸，如有需要可以移除。
+ 系统盘组件（30 美元）：
  - 一块威联通（QNAP）QM2-2S-220A Dual M.2 22110/2280 SATA SSD 扩展卡，包含两个 M.2 SATA 插槽与 ASMedia SATA 控制器。
  - 一块西部数据 M.2 SATA 蓝盘 250GB SSD.
+ 数据盘（机械）：
  - 两块西部数据 Ultrastar HC310 4TB 机械硬盘，购买自水货渠道。
  - 两块西部数据 Ultrastar HC520 12TB 机械硬盘，拆解自西部数据 D10 外置黑盘。

此外还需要如下组件，计划通过物品及资金募捐的形式收集：

+ 处理器：
  - 一块至强 E-2234 或 E-2236 处理器，具体取决于众筹结果。
  - E-2234: 230 美元。
  - E-2236: 340 美元。
+ 冗余系统盘（250GB 级别 M.2 SATA SSD）：
  - 与已有的系统盘组成 RAID-1, 由于该服务器将被托管于数据中心，故该配置有较大实际意义。
  - 西部数据 M.2 SATA 蓝盘 SSD: 44.99 美元。
  - 三星 860 EVO M.2 SATA SSD: 44.99 美元。

（处理器售价来自 eBay; SSD 售价来自亚马逊美区自营报价，均为税前价格）

# 常见问题

+ 为何不购置全新硬件（尤其是新硬盘）？
   - 受当下市场行情影响，购置全新硬盘的所需资金超出了社区的承受能力，故退而求其次购买轻度使用的二手硬件。
   - 2020 年 6 月 5 日 Ultrastar HC310 4TB 报价（亚马逊美区第三方卖家，水货）：188.08 美元。
   - 2020 年 6 月 5 日 西部数据 D10 12 TB 外置黑盘报价（亚马逊美区自营）：399.99 美元。
+ 硬件成色如何？
   - 被转让的 ProLiant MicorServer Gen10 Plus 与除西部数据 M.2 SATA 蓝盘 250GB SSD 以外的硬件自 2020 年 6 月开始被用于家用 NAS; 西部数据 SSD 则为同期购置后作为外置存储使用，且仅被用于辅助数次操作系统对拷克隆。所有硬件均保持了较好的成色。
+ 转让价格是如何确定的？
  - 由于所转让的硬件均为对应厂家的当代硬件，因此二手市场上并没有可靠的价格指标以供参考。
  - 故除系统盘组件以外的硬件的出让报价均大致为税前购买假的 0.5 倍。
  - 系统盘组件的报价则为象征价格，仅对应出让人组装该组件的工时与对该组件正常工作的保证。
  - 所转让硬件的原始购买价格如下：
     - ProLiant MicroServer Gen10 Plus Xeon E-2224 16GB S100i 服务器（CDW）：703.99 美元。
     - iLO Enablement Kit 扩展卡（CDW）：115.99 美元
     - Silicon Power 16GB Hynix IC DDR4 2666MHz 2Rx8 ECC UDIMM 内存（亚马逊美区官方旗舰店）：92.99 美元。
     - Ultrastar HC310 4TB 机械硬盘 (两家不同的新蛋第三方卖家): 119.99 美元 以及 129.95 美元。
     - 西部数据 D10 12TB 外置黑盘（亚马逊美区自营）：每件 223.99 美元（共两件）。
     - 威联通 QM2-2S-220A Dual M.2 22110/2280 SATA SSD 扩展卡（亚马逊美区自营）：99.00 美元。
     - 西部数据 M.2 SATA 蓝盘 250GB SSD（新蛋自营）：44.99 美元。
+ 为何升级处理器？
   - 至强 E-2224（4C4T）已经是慧与官方在 ProLiant MicroServer Gen10 Plus 平台上所支持的最高配处理器，但其性能对于 p-vector 依赖扫描服务而言依然有所不足。故为满足 p-vector 的需求，社区需要自行进行处理器升级。

# 日程计划

- 2021 年 6 月：Sijie Bu 完成闲置服务器出让准备工作。
- 2021 年 6-7 月：完成服务器移交与配置工作。
- 2021 年夏：
    - 将服务器托管至第三方机房。
    - 迁移软件源服务至该服务器。

# 参与者

- Sijie Bu <sijie.bu@aosc.io>, 硬件出让人。
- Mingcong Bai <jeffbai@aosc.io>, 购置联系人。
