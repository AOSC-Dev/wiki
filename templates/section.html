{% import "macros.html" as macros %}
{% extends "base.html" %}

{% block head %}
{{ macros::head(title=section.title, url=section.permalink, description=section.description) }}
{% endblock head %}

{% block header %}
<div id="position-bar">
  {# Navigation #}
  {% for ancestor in section.ancestors %}
  {% set an_section = get_section(path=ancestor, metadata_only=true) %}
  <a class="section-link" href="{{ an_section.permalink }}">{{ an_section.title }}</a>
  {% if not loop.last %}
  <span>/</span>
  {% else %}
  <span>/</span>
  <a class="section-link" href="{{ section.permalink }}">{{ section.title }}</a>
  <span>/</span>
  {% endif %}
  {% endfor %}

  {{ macros::language_select(source=section) }}
</div>

<h1 id="title">{{ section.title }}</h1>
<p id="description">{{ section.description }}</p>
{% endblock header %}

{% block main %}
<nav>
  {% for subsection_path in section.subsections %}
  {% set subsection = get_section(path=subsection_path, metadata_only=true) %}
    <span style="color: grey">> </span>
    <a href="{{ subsection.permalink }}">{{ subsection.title }}</a>
  {% endfor %}

  <b>Contents in this section:</b>
  {% for post in section.pages %}
    <a href="{{ post.permalink }}">{{ post.title }}</a>
  {% endfor %}

</nav>

<article>
  {{ section.content | safe }}
</article>
{% endblock main %}
